# NL4NetUnicorn

This system uses Retrieval Augmented Generation (RAG) to convert natural language prompts into netUnicorn Python code for data collection tasks.

## Setup

1. Clone directory:
```bash
git clone https://github.com/ShanmukhaSahiti/NL4NetUnicorn.git
```

2. Create a virtual environment and activate it:
```bash
python -m venv venv
source venv/bin/activate
```

3. Install dependencies:
```bash
pip install -r requirements.txt
```

4. Create a `.env` file in the root directory `(NL4NetUnicorn/)` with your OpenAI API key and netUnicorn login credentials:
```
NETUNICORN_ENDPOINT = your_endpoint_here
NETUNICORN_LOGIN = your_login_here
NETUNICORN_PASSWORD = your_password_here
OPENAI_API_KEY = your_api_key_here
```

## Usage

1. To generate code for a single prompt:
```bash
python generate_netunicorn_script.py -p "Create a NetUnicorn script that connects to the server, selects one available node, and runs a sleep task for 10 seconds. Ensure all results are printed."
```
By default, the system saves the final script to a file and executes a feedback loop with a maximum number of 3 retries. To disable saving the file and the feedback loop, use the `-s` and `-f` flags respectively. Use the `-r` flag to control the number of retries.
For example, to generate code for a single sleep task where the final script is not saved and with 4 retries:
```bash
python generate_netunicorn_script.py "Create a NetUnicorn script that connects to the server, selects one available node, and runs a sleep task for 10 seconds. Ensure all results are printed." -s -r 4
```


2. To generate code for one or more prompts and view an evaluation report:
```bash
python evaluate_rag.py -i "file containing one prompt on each line"
```
Use the `-s`, `-f`, and `-r` flags accordingly.

## Project Structure


- `data/`: Context for RAG system
  - `netunicorn_docs.json`
- `examples/`: Example usage scripts
- `src/`: Source code for the RAG system
  - `feedback_handler.py`
  - `netunicorn_rag.py`: Main RAG implementation
  - `script_executor.py`: Executes scripts generated by LLM
- `evaluate_rag.py`: Generates evaluation reports
- `generate_netunicorn_script.py`: Generates netUnicorn script for one prompt


## Features

- Converts natural language prompts to netunicorn Python code
- Uses RAG to understand context from documentation and examples
- Supports various data collection tasks
- Generates well-documented, production-ready code